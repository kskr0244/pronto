<!Doctype html>
<html>
	<head>
		<title>Unifi OneBox</title>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
		<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
		<meta http-equiv="cache-control" content="max-age=0">
        <meta http-equiv="cache-control" content="no-cache">
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />
        
		<meta name="description" content="Unifi OneBox" />
		<meta name="keywords" content="Unifi OneBox" />
		<meta name="author" content="Pronto Networks" />
		<!-- <link rel="shortcut icon" href="../favicon.ico"> -->
		<link rel="shortcut icon" href="img/logo.png">

		<!-- Bootstrap CSS -->
		<link href="assets/css/bootstrap.css" rel="stylesheet" media="screen">
		
		<!-- Main CSS -->
		<link href="assets/css/main.css" rel="stylesheet" media="screen">

		<!-- Font Awesome CSS -->
		<link href="fonts/font-awesome.css" rel="stylesheet">
		<!--[if IE 7]>
			<link rel="stylesheet" href="fonts/font-awesome.css">
		<![endif]-->

		<!-- Menu CSS -->
		<link href="assets/css/menu.css" rel="stylesheet" media="screen">

		<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
		
		<!-- Custom Style CSS -->
    	<link href="assets/css/custom-styles.css" rel="stylesheet" media="screen">
		
		<!-- File upload Style CSS -->
		<link rel="stylesheet" href="jQ/css/jquery.fileupload.css">		

		<script type="text/javascript">
			if(typeof(Storage)!=="undefined")
			{

				if (sessionStorage.login)
				{
					if(sessionStorage.login != "success")
					{
						window.location.href="./login.html";
					}
					else {
						if(sessionStorage.loginUserName == sessionStorage.webDevUserName)
						{
							window.location.href="./splash-page-management.html";
						}
					}
				}
				else
				{
					window.location.href="./login.html";
				}
			}
			else
			{
				// Sorry! No Web Storage support..
			}
			function showhideFilter()
			{
				if($("#dateFilters").is(":visible"))
				{
					$("#dateFilters").slideUp( "slow" );
				}
				else
				{
					$("#dateFilters").slideDown( "slow" );
				}
			}
		</script>
	</head>
	<body>
		
		<div class="dashboard-container">
			<div class="container">
				
				<script src="js/header.js"></script>


				<div class="col-xs-10">
				<!-- main Container start -->
				<div class="main-container">
					
					<!-- Row start -->
					<div class="row">
						<div class="col-xs-12 no-padding">
							<div class="panel panel-default">
								<div class="panel-heading clearfix">
									<i class="icon-dashboard"></i>
									<h3 class="panel-title">Dashboard</h3>
								</div><br>
								
								<div style="margin:-2px 10px;padding:0px 10px 0px 0px;text-align: right;" id="dateFilters1" class="panel-body">
									<label for="calendar"><span class="icon-calendar"></span>&nbsp;&nbsp;<span onclick="showhideFilter();" style="cursor:pointer;cursor:hand;text-decoration:none;">Date Filters</span></label>
								</div>
												
												<div class="panel-body" id="dateFilters" style="background-color: #EFF5FA;margin: 10px;display:none">
													<!--div class="row form-group no-margin">
														<div class="col-md-4 col-sm-4 col-xs-12">
															<label for="firstName">Custom Filter</label>
														</div>
													</div>
													<hr-->
													<div class="row form-group no-margin">
														<div class="col-md-4 col-sm-4 col-xs-12">
															<label for="firstName">From Date</label>
															<div class="input-group">
																<span class="input-group-addon"><span class="icon-calendar"></span></span>
																<input type="text" style="background:white;cursor: auto;" readonly class="form-control" placeholder="From Date" id="fromDate">
															</div>
															<span class="ip_errMsg"></span>
														</div>

	
														<div class="col-md-4 col-sm-4 col-xs-12">
															<label for="status">To Date</label>
															<div class="input-group">
																<span class="input-group-addon"><span class="icon-calendar"></span></span>
																<input type="text" style="background:white;cursor: auto;" readonly class="form-control" placeholder="To Date" id="toDate">
															</div>
															<span class="ip_errMsg"></span>
														</div>
														<div class="col-md-4 col-sm-4 col-xs-12">
													    <label for="status">&nbsp;</label>
														<div>
														<button class="btn btn-primary pull-right" id="searchButtonForDashboard" type="submit">Search</button>
														<button class="btn btn-danger btn-margin-right pull-right" style="margin-right: 5px" id="cancelFilter" type="button">Cancel Filter</button>
														</div>
													</div>
													</div>
													
												</div>
													
								<div class="row metrics">
        <div class="col-md-3 col-sm-6 col-xs-12">
          <div class="chart-wrapper">
            <div id="g1">
              <div class="weekly-stat-num" id="ua">*</div>
            </div>
            <h4>Unique devices served</h4>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 col-xs-12">
          <div class="chart-wrapper">
            <div id="g2">
              <div class="weekly-stat-num" id="sessionsserved">*</div>
            </div>
            <h4>Total sessions served</h4>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 col-xs-12">
          <div class="chart-wrapper">
            <div id="g3">
              <div class="weekly-stat-num" id="uniqVisitors">*</div>
            </div>
            <h4>Total visitors</h4>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 col-xs-12">
          <div class="chart-wrapper">
            <div id="g4">
              <div class="weekly-stat-num" id="repeVisitors">*</div>
            </div>
            <h4>Unique visitors</h4>
          </div>
        </div>
      </div>
	   <div class="col-md-12 col-sm-12 col-xs-12" style="margin-top:-10px;"><div class="center-align-text" style="font-size:x-small;text-align:center;padding:2px;color:rgb(14,171,224);">Date Range: <span id="dateFilter_Gauge">Overall</span></div></div>
	   <hr>
      <!-- Row2 Start -->
		<div class="row">
		<div class="col-md-1 col-sm-1"></div> 
			<div class="col-md-5 col-sm-5">
            	<div id="OSPieChart" class="chart-height" style="height:250px"></div>
          		<h5 class="center-align-text">OS Statistics</h5><div class="center-align-text" style="font-size:x-small;text-align:center;padding:2px;color:rgb(14,171,224);">Date Range: <span id="dateFilter_OS">Overall</span></div>
        	</div>
        <div class="col-md-2 col-sm-2"></div>                                
        <div class="col-md-5 col-sm-5">
          <!-- <div id="pieHover"></div> -->
          <div id="simplePieChart" class="chart-height" style="height:250px"></div>
          <h5 class="center-align-text">Browser Statistics</h5><div class="center-align-text" style="font-size:x-small;text-align:center;padding:2px;color:rgb(14,171,224);">Date Range: <span id="dateFilter_Browser">Overall</span></div>
        </div>
        <div class="col-md-1 col-sm-1"></div>    
        </div>
        <div class="row"><div class="col-md-1 col-sm-1"></div>    
		<div class="col-md-10 col-sm-10" style="border-top:1px solid #D9D9D9"></div>  <div class="col-md-1 col-sm-1"></div>  <br>  
        <!-- Row2 End -->
        <div class="row"><div class="col-md-1 col-sm-1"></div> <div class="col-md-10 col-sm-10"><div id="verticalBar" class="chart-height"></div><div class="col-md-1 col-sm-1"></div> 
				<h5 class="center-align-text">Sales Statistics</h5><div class="center-align-text" style="font-size:x-small;text-align:center;padding:2px;color:rgb(14,171,224);">Date Range: <span id="dateFilter_Sales">Overall</span></div>
</div>  </div>
        <div class="row"><div class="col-md-1 col-sm-1"></div>    
		<div class="col-md-10 col-sm-10" style="border-top:1px solid #D9D9D9"></div>  <div class="col-md-1 col-sm-1"></div>  <br>  
		</div>                            
        <div class="row">                            
        <div class="col-md-1 col-sm-1"></div>  
        <div class="col-md-10 col-sm-10">
          <div id="xAxisGrid" class="chart-height"></div>
          <h5 class="center-align-text">Bandwidth Statistics (in kbps)</h5><div class="center-align-text" style="font-size:x-small;text-align:center;padding:2px;color:rgb(14,171,224);">Date Range: <span id="dateFilter_BW">Overall</span></div>
        </div>
		<div class="col-md-1 col-sm-1">
		</div>
      </div>	
						  </div>
						</div>
					</div>
					<!-- Row end -->

				</div>
				<!-- main Container end -->
				</div>

			</div>	
		</div>
		
<!-- Bar Detailed Chart End -->
<div class='modal fade' id='salesDetailedModal' tabindex='-1' role='dialog' aria-labelledby='salesDetailed' aria-hidden='true'>
  <div style='width: 700px;' class='modal-dialog'>
    <div class='modal-content'>
      <div class='modal-header cust-table-modal-header'>
        <button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button>
        <h4 class='modal-title cust-table-modal-title'>Sales Statistics [<span id="reqdt"></span>]</h4>
      </div>
      <div class='modal-body cust-table-modal-body'>
        <div class='row'>
          <div class='col-lg-12 col-md-12 col-sm-12 col-sx-12'>
            <div class='table-responsive'>
              <div id='dt_example' class='table-responsive example_alt_pagination clearfix'>
                <div id='salesDetailedModalBody'></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Bar Detailed Chart End -->	
		<!-- Javascripts -->

		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="assets/javascripts/jquery.js"></script>

		<!-- Bootstrap JS -->
		<script src="assets/javascripts/bootstrap.js"></script>

		<!-- Javascript for menu -->
		<script src="assets/javascripts/menu-jquery.js"></script>

		<!-- Javascript for Cookie -->
		<script src="assets/javascripts/jquery.cookie.js"></script>
		
		<!-- Javascript for Print DIV Content using jQuery -->
		<script src="assets/javascripts/jQuery.print.js"></script>
		
		<!-- Data Tables -->
		<script src="assets/javascripts/jquery.datatables.js"></script>
		
		<!-- Upload util js  -->
		<script src="jQ/js/fileupload/file-upload-util.js"></script>
		
		<!-- Custom JS -->
		<script src="js/disableBackButton.js"></script>
		<script src="js/util.js"></script>
		<script src="js/AjaxCalls.js"></script>
		<script src="js/FormFieldsValidation.js"></script>
		
		
		<!-- Flot JS -->
	    <script src="assets/javascripts/flot/jquery.flot.js"></script>
	    <script src="assets/javascripts/flot/jquery.flot.selection.js"></script>
	    <script src="assets/javascripts/flot/jquery.flot.resize.js"></script>
	    <script src="assets/javascripts/flot/jquery.flot.tooltip.js"></script>
	    <script src="assets/javascripts/flot/jquery.flot.pie.js"></script>
	    <script src="assets/javascripts/flot/jquery.flot.categories.js"></script>
	    <script src="assets/javascripts/flot/jquery.flot.axislabels.js"></script>


	    <!-- justgauge -->
	    <script src="assets/javascripts/justgauge/raphael.min.js"></script>
	    <script src="assets/javascripts/justgauge/justgage.min.js"></script>

	    <!-- Chart Includes -->
	    <script src="js/dashboard.js"></script>


    	<script type="text/javascript">
			$(document).ready(function(){
					if(sessionStorage.loginUserName == _gbl_Admin_User)
					{
						$.fn.oneTimePSWDCheck("INDEX");
					}
					$('a').tooltip('hide');
					$.fn.menuSidebar("1");
					$.fn.getEncryptedAPI();
					$.fn.getApStatus();
					
					$.fn.Wisp_Super_pwd_EncryptValuesUsingEncryptionToken();
					$.fn.getConnectedUser();

					$.fn.dashBoardReps = function() {
						$.fn.getOWAData('ua');
						$.fn.getOWAData('sessionsserved');
						$.fn.getOWAData('totalvisitors');
						$.fn.getOWAData('uniquevisitors');

						$.fn.graphBW();
						$.fn.graphBar();
						$.fn.graphPie1();
						$.fn.graphPie2();
					};
					$.fn.dashBoardReps();
					var sto=setInterval(function() {
						$.fn.dashBoardReps();
					}, 300000);
			});	
		</script>
<!-- Javascript for datepicker -->
  <script src="assets/javascripts/fancy-sliders/jquery-ui.js"></script>
<!-- datepicker CSS -->
  <link rel="stylesheet" href="assets/javascripts/fancy-sliders/jquery-ui.css">		
  <script type="text/javascript">
	
			$(document).ready(function(){
	
				$('a').tooltip('hide');
	
				$("#fromDate").datepicker({
					maxDate: 0,
					numberOfMonths: 1,
					dateFormat: 'yy-mm-dd',
						changeMonth: true,
						changeYear: true,
					onSelect: function(selected) {
						selected = selected +" "+ "00:00:00";
						$('#fromDate').val(selected);
						var currentToDate =  $.trim($('#toDate').val());
						$("#toDate").datepicker("option","minDate", selected);
						$('#toDate').val(currentToDate);
					}
	
				});
	
				$("#toDate").datepicker({
					maxDate: 0,
					numberOfMonths: 1,
					dateFormat: 'yy-mm-dd',
						changeMonth: true,
						changeYear: true,
					onSelect: function(selected) {
						selected = selected +" "+ "23:59:59";
						$('#toDate').val(selected);
						
						var currentFromDate =  $.trim($('#fromDate').val());
						$("#fromDate").datepicker("option","maxDate", selected);
						$('#fromDate').val(currentFromDate);
					}
				});
				$.fn.getEncryptedAPI();
				$.fn.getApStatus();
				$.fn.Wisp_Super_pwd_EncryptValuesUsingEncryptionToken();
				$.fn.getConnectedUser();
				$.fn.getGatewayDetails();
				if($.trim($("#fromDate").val()) != "")
				{
					showhideFilter();
				}

				if(sessionStorage.loginUserName != _gbl_Admin_User)
				{
					$("#menu_3_3").hide();
					$("#menu_3_4").hide();
				}
			});
		</script>
		<script type="text/javascript">
			$(document).ready(function(){
				var xhttp;
				if(window.XMLHttpRequest)
				{
					xhttp = new XMLHttpRequest();
				}
				else if(window.ActiveXObject)
				{
					xhttp = new ActiveXObject("Microsoft.XMLHTTP");
				}

				xhttp.onreadystatechange = function() {
					if (xhttp.readyState == 4 && xhttp.status == 200)
					{
						if( xhttp.responseText.trim() == "Failure")
						{
						//	alert("Enter for Failure : " + $.trim( xhttp.responseText ) );
							window.location.reload(true);
							var cookies = document.cookie.split(";");

							for (var i = 0; i < cookies.length; i++) {
								var cookie = cookies[i];
								var eqPos = cookie.indexOf("=");
								var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
								document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
							}

							sessionStorage.clear();
						//	window.location.href="./login.html";

							location.replace( "./login.html" );
						}
					}
				};
				
				xhttp.open("POST", "./UserAuthentication.jsp", false);
				xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
				xhttp.send("userId="+sessionStorage.loginUserName+"&sessionToken="+$.fn.fixedEncodeURIComponent(sessionStorage.loginToken));
			});
		</script>
	</body>
</html>